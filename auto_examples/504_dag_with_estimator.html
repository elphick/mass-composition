<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DAG with Estimator &mdash; mass-composition  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Simulating a Network in Parallel" href="_501_simulating_networks.html" />
    <link rel="prev" title="DAG with Partitions" href="503_dag_with_partitions.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            mass-composition
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/user_guide.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Example Gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="001_basic_usage.html">Basic usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="002_data_examples.html">Datasets and Sample Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="003_constrain.html">Constrain</a></li>
<li class="toctree-l2"><a class="reference internal" href="004_plot_demo.html">Plot Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="104_math_operations.html">Math Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="105_create_network.html">Create Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="106_network_basics.html">Network Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="107_filtering.html">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="108_sankey_plots.html">Sankey Plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="109_split_and_partition.html">Splitting and Partitioning Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="110_network_layouts.html">Network Layouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="111_constraints_and_status.html">Constraints and Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="112_compare.html">Compare</a></li>
<li class="toctree-l2"><a class="reference internal" href="113_partition_models.html">Partition Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="114_compare_partitions.html">Compare Partition Separations</a></li>
<li class="toctree-l2"><a class="reference internal" href="115_simplify_network.html">Simplify a Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="200_interval_data.html">Interval Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="201_incremental_separation.html">Incremental Separation</a></li>
<li class="toctree-l2"><a class="reference internal" href="202_interval_data_advanced.html">Interval Data - Advanced</a></li>
<li class="toctree-l2"><a class="reference internal" href="300_interval_data_sink_float.html">Interval Data - Sink Float</a></li>
<li class="toctree-l2"><a class="reference internal" href="400_mass_balancing.html">Mass Balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="502_dag.html">DAG to Define and Simulate</a></li>
<li class="toctree-l2"><a class="reference internal" href="503_dag_with_partitions.html">DAG with Partitions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">DAG with Estimator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-data">Load Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-a-model">Build a model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-the-model">Test the model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-head-masscomposition-object">Create a Head MassComposition object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-the-dag">Define the DAG</a></li>
<li class="toctree-l3"><a class="reference internal" href="#more-complex-dag">More Complex DAG</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="_501_simulating_networks.html">Simulating a Network in Parallel</a></li>
<li class="toctree-l2"><a class="reference internal" href="_simulating_network_functions.html">Network Simulation Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="grade_tonnage.html">Grade Tonnage</a></li>
<li class="toctree-l2"><a class="reference internal" href="iron_ore_assays.html">Iron Ore Assays</a></li>
<li class="toctree-l2"><a class="reference internal" href="resampling_interval_data.html">Resampling Interval Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#xarray-gallery">Xarray Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../datasets/datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">mass-composition</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Example Gallery</a></li>
      <li class="breadcrumb-item active">DAG with Estimator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/auto_examples/504_dag_with_estimator.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-504-dag-with-estimator-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="dag-with-estimator">
<span id="sphx-glr-auto-examples-504-dag-with-estimator-py"></span><h1>DAG with Estimator<a class="headerlink" href="#dag-with-estimator" title="Permalink to this heading"></a></h1>
<p>Flowsheet can be used to apply an estimator in a process flowsheet.  This example demonstrates how to use a DAG
to define a flowsheet that applies a lump estimator to a feed stream.</p>
<p>The focus will not be on the model development, but rather on the simulation.  The model is a simple RandomForest
regressor that predicts the lump mass and composition from the feed stream.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example uses the <cite>estimator</cite> extras.  ensure you have installed like <code class="docutils literal notranslate"><span class="pre">poetry</span> <span class="pre">install</span> <span class="pre">-E</span> <span class="pre">estimator</span></code>.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="c1"># This import at the top to guard against the estimator extras not being installed</span>
<span class="kn">from</span> <span class="nn">elphick.mass_composition.utils.sklearn</span> <span class="kn">import</span> <span class="n">PandasPipeline</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">make_pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>

<span class="kn">from</span> <span class="nn">elphick.mass_composition</span> <span class="kn">import</span> <span class="n">MassComposition</span><span class="p">,</span> <span class="n">Stream</span>
<span class="kn">from</span> <span class="nn">elphick.mass_composition.dag</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="kn">from</span> <span class="nn">elphick.mass_composition.datasets.sample_data</span> <span class="kn">import</span> <span class="n">iron_ore_met_sample_data</span>
<span class="kn">from</span> <span class="nn">elphick.mass_composition.flowsheet</span> <span class="kn">import</span> <span class="n">Flowsheet</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<section id="load-data">
<h2>Load Data<a class="headerlink" href="#load-data" title="Permalink to this heading"></a></h2>
<p>We load some metallurgical data from a drill program, REF: A072391
Since we are not concerned about the model performance in this example, we’ll convert the categorical feature
bulk_hole_no to an integer</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="n">iron_ore_met_sample_data</span><span class="p">()</span>

<span class="n">base_components</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fe&#39;</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="s1">&#39;sio2&#39;</span><span class="p">,</span> <span class="s1">&#39;al2o3&#39;</span><span class="p">,</span> <span class="s1">&#39;loi&#39;</span><span class="p">]</span>
<span class="n">cols_x</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dry_weight_lump_kg&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;head_</span><span class="si">{</span><span class="n">comp</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">base_components</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="s1">&#39;bulk_hole_no&#39;</span><span class="p">]</span>
<span class="n">cols_y</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;lump_pct&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="sa">f</span><span class="s1">&#39;lump_</span><span class="si">{</span><span class="n">comp</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">for</span> <span class="n">comp</span> <span class="ow">in</span> <span class="n">base_components</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cols_x</span> <span class="o">+</span> <span class="n">cols_y</span><span class="p">]</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;lump_pct&gt;0&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;dry_weight_lump_kg&#39;</span><span class="p">:</span> <span class="s1">&#39;head_mass_dry&#39;</span><span class="p">})</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;bulk_hole_no&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;bulk_hole_no&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">codes</span>

<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>head_mass_dry</th>
      <th>head_fe</th>
      <th>head_p</th>
      <th>head_sio2</th>
      <th>head_al2o3</th>
      <th>head_loi</th>
      <th>bulk_hole_no</th>
      <th>lump_pct</th>
      <th>lump_fe</th>
      <th>lump_p</th>
      <th>lump_sio2</th>
      <th>lump_al2o3</th>
      <th>lump_loi</th>
    </tr>
    <tr>
      <th>sample_number</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30129</th>
      <td>0.31</td>
      <td>62.94</td>
      <td>0.02</td>
      <td>3.71</td>
      <td>1.51</td>
      <td>4.12</td>
      <td>0</td>
      <td>21.3</td>
      <td>64.95</td>
      <td>0.014</td>
      <td>2.29</td>
      <td>0.87</td>
      <td>3.83</td>
    </tr>
    <tr>
      <th>30131</th>
      <td>0.52</td>
      <td>64.79</td>
      <td>0.02</td>
      <td>2.88</td>
      <td>1.29</td>
      <td>2.80</td>
      <td>0</td>
      <td>22.4</td>
      <td>66.48</td>
      <td>0.009</td>
      <td>1.67</td>
      <td>0.65</td>
      <td>2.46</td>
    </tr>
    <tr>
      <th>30132</th>
      <td>0.41</td>
      <td>65.22</td>
      <td>0.02</td>
      <td>2.64</td>
      <td>1.15</td>
      <td>2.61</td>
      <td>0</td>
      <td>16.6</td>
      <td>66.78</td>
      <td>0.009</td>
      <td>1.34</td>
      <td>0.47</td>
      <td>2.67</td>
    </tr>
    <tr>
      <th>30133</th>
      <td>0.32</td>
      <td>64.67</td>
      <td>0.02</td>
      <td>2.85</td>
      <td>1.17</td>
      <td>3.00</td>
      <td>0</td>
      <td>19.6</td>
      <td>66.23</td>
      <td>0.011</td>
      <td>1.56</td>
      <td>0.62</td>
      <td>2.74</td>
    </tr>
    <tr>
      <th>30134</th>
      <td>0.31</td>
      <td>65.29</td>
      <td>0.02</td>
      <td>2.25</td>
      <td>0.94</td>
      <td>2.93</td>
      <td>0</td>
      <td>13.9</td>
      <td>66.53</td>
      <td>0.011</td>
      <td>1.41</td>
      <td>0.54</td>
      <td>2.91</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /></section>
<section id="build-a-model">
<h2>Build a model<a class="headerlink" href="#build-a-model" title="Permalink to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">X</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">cols_y</span><span class="p">]]</span>
<span class="n">y</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">cols_y</span><span class="p">]</span>

<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>The model needs to be wrapped in a PandasPipeline object to ensure that the column names are preserved.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pipe</span><span class="p">:</span> <span class="n">PandasPipeline</span> <span class="o">=</span> <span class="n">PandasPipeline</span><span class="o">.</span><span class="n">from_pipeline</span><span class="p">(</span>
    <span class="n">make_pipeline</span><span class="p">(</span><span class="n">StandardScaler</span><span class="p">(),</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)))</span>

<span class="n">pipe</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: black;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: block;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 1ex;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>PandasPipeline(steps=[(&#x27;standardscaler&#x27;, StandardScaler()),
                      (&#x27;randomforestregressor&#x27;,
                       RandomForestRegressor(random_state=42))])</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item sk-dashed-wrapped"><div class="sk-label-container"><div class="sk-label  sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" ><label for="sk-estimator-id-1" class="sk-toggleable__label  sk-toggleable__label-arrow ">&nbsp;PandasPipeline<span class="sk-estimator-doc-link ">i<span>Not fitted</span></span></label><div class="sk-toggleable__content "><pre>PandasPipeline(steps=[(&#x27;standardscaler&#x27;, StandardScaler()),
                      (&#x27;randomforestregressor&#x27;,
                       RandomForestRegressor(random_state=42))])</pre></div> </div></div><div class="sk-serial"><div class="sk-item"><div class="sk-estimator  sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-2" type="checkbox" ><label for="sk-estimator-id-2" class="sk-toggleable__label  sk-toggleable__label-arrow ">&nbsp;StandardScaler<a class="sk-estimator-doc-link " rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.4/modules/generated/sklearn.preprocessing.StandardScaler.html">?<span>Documentation for StandardScaler</span></a></label><div class="sk-toggleable__content "><pre>StandardScaler()</pre></div> </div></div><div class="sk-item"><div class="sk-estimator  sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-3" type="checkbox" ><label for="sk-estimator-id-3" class="sk-toggleable__label  sk-toggleable__label-arrow ">&nbsp;RandomForestRegressor<a class="sk-estimator-doc-link " rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.4/modules/generated/sklearn.ensemble.RandomForestRegressor.html">?<span>Documentation for RandomForestRegressor</span></a></label><div class="sk-toggleable__content "><pre>RandomForestRegressor(random_state=42)</pre></div> </div></div></div></div></div></div>
</div>
<br />
<br /></section>
<section id="test-the-model">
<h2>Test the model<a class="headerlink" href="#test-the-model" title="Permalink to this heading"></a></h2>
<p>The model can be called directly to predict the lump percentage and composition from the feed stream.
We will pass in a dataframe with the same columns as the training data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;head_mass_dry&#39;</span><span class="p">]),</span> <span class="n">y_train</span><span class="p">)</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Test score: </span><span class="si">{</span><span class="n">pipe</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span><span class="w"> </span><span class="n">y_test</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">y_pred</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>lump_pct</th>
      <th>lump_fe</th>
      <th>lump_p</th>
      <th>lump_sio2</th>
      <th>lump_al2o3</th>
      <th>lump_loi</th>
    </tr>
    <tr>
      <th>sample_number</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30838</th>
      <td>21.150</td>
      <td>62.1259</td>
      <td>0.03646</td>
      <td>1.5286</td>
      <td>0.9012</td>
      <td>8.3704</td>
    </tr>
    <tr>
      <th>30836</th>
      <td>17.511</td>
      <td>61.8068</td>
      <td>0.04462</td>
      <td>1.6825</td>
      <td>0.9777</td>
      <td>8.5672</td>
    </tr>
    <tr>
      <th>30143</th>
      <td>20.425</td>
      <td>64.9562</td>
      <td>0.01953</td>
      <td>2.0668</td>
      <td>0.6913</td>
      <td>4.1378</td>
    </tr>
    <tr>
      <th>30158</th>
      <td>18.170</td>
      <td>58.1892</td>
      <td>0.03722</td>
      <td>8.7937</td>
      <td>0.9085</td>
      <td>6.5543</td>
    </tr>
    <tr>
      <th>30915</th>
      <td>22.386</td>
      <td>62.5843</td>
      <td>0.03022</td>
      <td>1.4852</td>
      <td>0.9723</td>
      <td>7.6845</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /></section>
<section id="create-a-head-masscomposition-object">
<h2>Create a Head MassComposition object<a class="headerlink" href="#create-a-head-masscomposition-object" title="Permalink to this heading"></a></h2>
<p>Now we will create a MassComposition object and use it to apply the model to the feed stream.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span><span class="p">:</span> <span class="n">MassComposition</span> <span class="o">=</span> <span class="n">MassComposition</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">X_test</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bulk_hole_no&#39;</span><span class="p">]),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">,</span>
                                        <span class="n">mass_dry_var</span><span class="o">=</span><span class="s1">&#39;head_mass_dry&#39;</span><span class="p">)</span>
<span class="n">lump</span><span class="p">,</span> <span class="n">fines</span> <span class="o">=</span> <span class="n">head</span><span class="o">.</span><span class="n">split_by_estimator</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">pipe</span><span class="p">,</span> <span class="n">name_2</span><span class="o">=</span><span class="s1">&#39;fines&#39;</span><span class="p">,</span>
                                      <span class="n">mass_recovery_column</span><span class="o">=</span><span class="s1">&#39;lump_pct&#39;</span><span class="p">,</span> <span class="n">mass_recovery_max</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                                      <span class="n">extra_features</span><span class="o">=</span><span class="n">X_test</span><span class="p">[</span><span class="s1">&#39;bulk_hole_no&#39;</span><span class="p">])</span>
<span class="n">lump</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mass_wet</th>
      <th>mass_dry</th>
      <th>H2O</th>
      <th>Fe</th>
      <th>P</th>
      <th>SiO2</th>
      <th>Al2O3</th>
      <th>LOI</th>
    </tr>
    <tr>
      <th>sample_number</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30838</th>
      <td>0.300330</td>
      <td>0.300330</td>
      <td>0.0</td>
      <td>62.1259</td>
      <td>0.03646</td>
      <td>1.5286</td>
      <td>0.9012</td>
      <td>8.3704</td>
    </tr>
    <tr>
      <th>30836</th>
      <td>0.227643</td>
      <td>0.227643</td>
      <td>0.0</td>
      <td>61.8068</td>
      <td>0.04462</td>
      <td>1.6825</td>
      <td>0.9777</td>
      <td>8.5672</td>
    </tr>
    <tr>
      <th>30143</th>
      <td>0.085785</td>
      <td>0.085785</td>
      <td>0.0</td>
      <td>64.9562</td>
      <td>0.01953</td>
      <td>2.0668</td>
      <td>0.6913</td>
      <td>4.1378</td>
    </tr>
    <tr>
      <th>30158</th>
      <td>0.101752</td>
      <td>0.101752</td>
      <td>0.0</td>
      <td>58.1892</td>
      <td>0.03722</td>
      <td>8.7937</td>
      <td>0.9085</td>
      <td>6.5543</td>
    </tr>
    <tr>
      <th>30915</th>
      <td>0.385039</td>
      <td>0.385039</td>
      <td>0.0</td>
      <td>62.5843</td>
      <td>0.03022</td>
      <td>1.4852</td>
      <td>0.9723</td>
      <td>7.6845</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fines</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mass_wet</th>
      <th>mass_dry</th>
      <th>H2O</th>
      <th>Fe</th>
      <th>P</th>
      <th>SiO2</th>
      <th>Al2O3</th>
      <th>LOI</th>
    </tr>
    <tr>
      <th>sample_number</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>30838</th>
      <td>1.119670</td>
      <td>1.119670</td>
      <td>0.0</td>
      <td>60.672634</td>
      <td>0.053632</td>
      <td>1.974256</td>
      <td>1.166007</td>
      <td>9.092784</td>
    </tr>
    <tr>
      <th>30836</th>
      <td>1.072357</td>
      <td>1.072357</td>
      <td>0.0</td>
      <td>60.416554</td>
      <td>0.051142</td>
      <td>2.309856</td>
      <td>1.501770</td>
      <td>8.752437</td>
    </tr>
    <tr>
      <th>30143</th>
      <td>0.334215</td>
      <td>0.334215</td>
      <td>0.0</td>
      <td>63.892801</td>
      <td>0.032687</td>
      <td>2.975628</td>
      <td>1.644740</td>
      <td>3.424259</td>
    </tr>
    <tr>
      <th>30158</th>
      <td>0.458248</td>
      <td>0.458248</td>
      <td>0.0</td>
      <td>58.788980</td>
      <td>0.040617</td>
      <td>8.092612</td>
      <td>1.643560</td>
      <td>5.669172</td>
    </tr>
    <tr>
      <th>30915</th>
      <td>1.334961</td>
      <td>1.334961</td>
      <td>0.0</td>
      <td>60.800730</td>
      <td>0.042821</td>
      <td>2.135598</td>
      <td>1.948541</td>
      <td>8.155420</td>
    </tr>
  </tbody>
</table>
</div>
</div>
<br />
<br /></section>
<section id="define-the-dag">
<h2>Define the DAG<a class="headerlink" href="#define-the-dag" title="Permalink to this heading"></a></h2>
<p>First we define a simple DAG, where the feed stream is split into two streams, lump and fines.
The lump estimator requires the usual mass-composition variables plus an addition feature/variable
called <cite>bulk_hole_no</cite>. Since the <cite>bulk_hole_no</cite> is available in the feed stream, it is immediately accessible
to the estimator.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">head</span><span class="p">:</span> <span class="n">MassComposition</span> <span class="o">=</span> <span class="n">MassComposition</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">X_test</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">,</span>
                                        <span class="n">mass_dry_var</span><span class="o">=</span><span class="s1">&#39;head_mass_dry&#39;</span><span class="p">)</span>

<span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A072391&#39;</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="n">Stream</span><span class="o">.</span><span class="n">split_by_estimator</span><span class="p">,</span> <span class="n">streams</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;head&#39;</span><span class="p">],</span>
             <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;estimator&#39;</span><span class="p">:</span> <span class="n">pipe</span><span class="p">,</span> <span class="s1">&#39;name_1&#39;</span><span class="p">:</span> <span class="s1">&#39;lump&#39;</span><span class="p">,</span> <span class="s1">&#39;name_2&#39;</span><span class="p">:</span> <span class="s1">&#39;fines&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;mass_recovery_column&#39;</span><span class="p">:</span> <span class="s1">&#39;lump_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;mass_recovery_max&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;lump&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="s1">&#39;lump&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;fines&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="s1">&#39;fines&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">input_streams</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;head&#39;</span><span class="p">:</span> <span class="n">head</span><span class="p">},</span> <span class="n">progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">Flowsheet</span><span class="o">.</span><span class="n">from_dag</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span><span class="o">.</span><span class="n">plot_network</span><span class="p">()</span>
<span class="n">fig</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Executing nodes:   0%|          | 0/4 [00:00&lt;?, ?node/s]
Executing nodes:   0%|          | 0/4 [00:00&lt;?, ?node/s, Processed node: head]
Executing nodes:  25%|##5       | 1/4 [00:00&lt;00:00,  3.99node/s, Processed node: screen]
Executing nodes:  50%|#####     | 2/4 [00:00&lt;00:00,  7.98node/s, Processed node: screen]
Executing nodes:  50%|#####     | 2/4 [00:00&lt;00:00,  7.98node/s, Processed node: lump]
Executing nodes:  75%|#######5  | 3/4 [00:00&lt;00:00,  7.98node/s, Processed node: fines]
Executing nodes: 100%|##########| 4/4 [00:00&lt;00:00, 15.93node/s, Processed node: fines]
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>                <div id="4c00570d-4b7f-495f-b052-d8a496bce36b" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("4c00570d-4b7f-495f-b052-d8a496bce36b")) {                    Plotly.newPlot(                        "4c00570d-4b7f-495f-b052-d8a496bce36b",                        [{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"head","x":[-1.0,-0.2],"y":[0.0,0.0],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"lump","x":[-0.2,0.6000000000000001],"y":[0.0,0.4],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"fines","x":[-0.2,0.6000000000000001],"y":[0.0,-0.4],"type":"scatter"},{"hoverinfo":"none","marker":{"color":["grey","green","grey","grey"],"line":{"width":2},"size":30},"mode":"markers+text","text":["head","screen","lump","fines"],"x":[-1.0,-0.2,0.6000000000000001,0.6000000000000001],"y":[0.0,0.0,0.4,-0.4],"type":"scatter"},{"hoverinfo":"text","marker":{"color":"grey","line":{"width":1},"size":3},"mode":"markers","text":["head","lump","fines"],"x":[-0.6,0.20000000000000004,0.20000000000000004],"y":[0.0,0.2,-0.2],"type":"scatter"}],                        {"hovermode":"closest","margin":{"b":20,"l":5,"r":5,"t":40},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":false,"title":{"font":{"size":16},"text":"A072391\u003cbr\u003e\u003cbr\u003e\u003csup\u003eBalanced: True\u003cbr\u003eEdge Status OK: True\u003c\u002fsup\u003e"},"xaxis":{"showgrid":false,"showticklabels":false,"zeroline":false},"yaxis":{"showgrid":false,"showticklabels":false,"zeroline":false},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
<br />
<br /></section>
<section id="more-complex-dag">
<h2>More Complex DAG<a class="headerlink" href="#more-complex-dag" title="Permalink to this heading"></a></h2>
<p>This DAG is to test a more complex flowsheet where the estimator may have all the features
immediately available in the parent stream.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This example works, but it does so since all attribute (extra) variables are passed all the way around
the network in the current design.  This is to be changed in the future to allow for more efficient processing.
Once attributes are no longer passed, changes will be needed to the DAG to marshall
features from other streams in the network (most often the input stream).</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;A072391&#39;</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;head&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;screen&#39;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="n">Stream</span><span class="o">.</span><span class="n">split_by_estimator</span><span class="p">,</span> <span class="n">streams</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;head&#39;</span><span class="p">],</span>
             <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;estimator&#39;</span><span class="p">:</span> <span class="n">pipe</span><span class="p">,</span> <span class="s1">&#39;name_1&#39;</span><span class="p">:</span> <span class="s1">&#39;lump&#39;</span><span class="p">,</span> <span class="s1">&#39;name_2&#39;</span><span class="p">:</span> <span class="s1">&#39;fines&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;mass_recovery_column&#39;</span><span class="p">:</span> <span class="s1">&#39;lump_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;mass_recovery_max&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">})</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_step</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;screen_2&#39;</span><span class="p">,</span> <span class="n">operation</span><span class="o">=</span><span class="n">Stream</span><span class="o">.</span><span class="n">split_by_estimator</span><span class="p">,</span> <span class="n">streams</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;fines&#39;</span><span class="p">],</span>
             <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;estimator&#39;</span><span class="p">:</span> <span class="n">pipe</span><span class="p">,</span> <span class="s1">&#39;name_1&#39;</span><span class="p">:</span> <span class="s1">&#39;lump_2&#39;</span><span class="p">,</span> <span class="s1">&#39;name_2&#39;</span><span class="p">:</span> <span class="s1">&#39;fines_2&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;mass_recovery_column&#39;</span><span class="p">:</span> <span class="s1">&#39;lump_pct&#39;</span><span class="p">,</span> <span class="s1">&#39;mass_recovery_max&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                     <span class="s1">&#39;allow_prefix_mismatch&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">})</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;lump&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="s1">&#39;lump_2&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;fines&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="s1">&#39;fines_2&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;stockpile&#39;</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="s1">&#39;lump&#39;</span><span class="p">)</span>
<span class="n">dag</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">input_streams</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;head&#39;</span><span class="p">:</span> <span class="n">head</span><span class="p">},</span> <span class="n">progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">fs</span><span class="p">:</span> <span class="n">Flowsheet</span> <span class="o">=</span> <span class="n">Flowsheet</span><span class="o">.</span><span class="n">from_dag</span><span class="p">(</span><span class="n">dag</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">plot_network</span><span class="p">()</span>
<span class="n">fig</span>
</pre></div>
</div>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Executing nodes:   0%|          | 0/6 [00:00&lt;?, ?node/s]
Executing nodes:   0%|          | 0/6 [00:00&lt;?, ?node/s, Processed node: head]
Executing nodes:  17%|#6        | 1/6 [00:00&lt;00:01,  3.92node/s, Processed node: screen]
Executing nodes:  33%|###3      | 2/6 [00:00&lt;00:00,  7.83node/s, Processed node: screen]
Executing nodes:  33%|###3      | 2/6 [00:00&lt;00:00,  7.83node/s, Processed node: screen_2]
Executing nodes:  50%|#####     | 3/6 [00:00&lt;00:00,  6.11node/s, Processed node: screen_2]
Executing nodes:  50%|#####     | 3/6 [00:00&lt;00:00,  6.11node/s, Processed node: stockpile]
Executing nodes:  67%|######6   | 4/6 [00:00&lt;00:00,  6.11node/s, Processed node: lump]
Executing nodes:  83%|########3 | 5/6 [00:00&lt;00:00,  6.11node/s, Processed node: fines]
Executing nodes: 100%|##########| 6/6 [00:00&lt;00:00, 12.77node/s, Processed node: fines]
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>                <div id="1a57092d-5091-47c4-85d6-ba0deada1336" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("1a57092d-5091-47c4-85d6-ba0deada1336")) {                    Plotly.newPlot(                        "1a57092d-5091-47c4-85d6-ba0deada1336",                        [{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"head","x":[-1.0,-0.4545454545454546],"y":[0.0,0.0],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"fines","x":[-0.4545454545454546,0.09090909090909093],"y":[0.0,0.27272727272727276],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"lump","x":[-0.4545454545454546,0.09090909090909093],"y":[0.0,-0.27272727272727276],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"lump_2","x":[0.09090909090909093,0.6363636363636365],"y":[0.27272727272727276,0.27272727272727276],"type":"scatter"},{"hoverinfo":"text","line":{"color":"grey","width":2},"marker":{"angleref":"previous","color":"grey","size":16,"standoff":15,"symbol":"arrow"},"mode":"lines+markers","text":"fines_2","x":[0.09090909090909093,0.6363636363636365],"y":[0.27272727272727276,-0.27272727272727276],"type":"scatter"},{"hoverinfo":"none","marker":{"color":["grey","green","green","grey","grey","grey"],"line":{"width":2},"size":30},"mode":"markers+text","text":["head","screen","screen_2","lump","fines","stockpile"],"x":[-1.0,-0.4545454545454546,0.09090909090909093,0.6363636363636365,0.6363636363636365,0.09090909090909093],"y":[0.0,0.0,0.27272727272727276,0.27272727272727276,-0.27272727272727276,-0.27272727272727276],"type":"scatter"},{"hoverinfo":"text","marker":{"color":"grey","line":{"width":1},"size":3},"mode":"markers","text":["head","fines","lump","lump_2","fines_2"],"x":[-0.7272727272727273,-0.18181818181818182,-0.18181818181818182,0.3636363636363637,0.3636363636363637],"y":[0.0,0.13636363636363638,-0.13636363636363638,0.27272727272727276,0.0],"type":"scatter"}],                        {"hovermode":"closest","margin":{"b":20,"l":5,"r":5,"t":40},"paper_bgcolor":"rgba(0,0,0,0)","plot_bgcolor":"rgba(0,0,0,0)","showlegend":false,"title":{"font":{"size":16},"text":"A072391\u003cbr\u003e\u003cbr\u003e\u003csup\u003eBalanced: True\u003cbr\u003eEdge Status OK: True\u003c\u002fsup\u003e"},"xaxis":{"showgrid":false,"showticklabels":false,"zeroline":false},"yaxis":{"showgrid":false,"showticklabels":false,"zeroline":false},"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}}},                        {"responsive": true}                    )                };                            </script>        </div>
</div>
<br />
<br /><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">table_plot</span><span class="p">(</span><span class="n">plot_type</span><span class="o">=</span><span class="s1">&#39;sankey&#39;</span><span class="p">,</span> <span class="n">sankey_color_var</span><span class="o">=</span><span class="s1">&#39;Fe&#39;</span><span class="p">,</span> <span class="n">sankey_edge_colormap</span><span class="o">=</span><span class="s1">&#39;copper_r&#39;</span><span class="p">,</span> <span class="n">sankey_vmin</span><span class="o">=</span><span class="mi">52</span><span class="p">,</span>
                    <span class="n">sankey_vmax</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
<span class="n">plotly</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<html>
<head><meta charset="utf-8" /></head>
<body>
    <div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>                <div id="d1c96f7c-7b73-4b80-b5b0-36940237da3c" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("d1c96f7c-7b73-4b80-b5b0-36940237da3c")) {                    Plotly.newPlot(                        "d1c96f7c-7b73-4b80-b5b0-36940237da3c",                        [{"cells":{"align":"left","fill":{"color":[["whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke","whitesmoke","lightgray","whitesmoke","lightgray","whitesmoke"]]},"format":["%s",".0f",".0f",".1f",".2f",".2f",".2f",".2f",".2f"],"values":[["head","fines","lump","lump_2","fines_2"],[77.93999999999998,62.2200643,15.719935700000002,12.478655849667005,49.74140845033299],[77.93999999999998,62.2200643,15.719935700000002,12.478655849667005,49.74140845033299],[0.0,0.0,0.0,0.0,0.0],[60.53262124711315,60.18921666360829,61.89182879569031,61.76761465033597,59.79324304959517],[0.054062099050551704,0.056759482114308896,0.04338576099983666,0.04359922927484373,0.06006100234050568],[2.865287400564537,3.048544382215143,2.1399497529223352,2.221888703997206,3.2559279693718057],[1.623039517577624,1.7912025636689992,0.9574442034257177,0.9784843080612233,1.9950896615704916],[8.151469078778547,8.214911411312539,7.900362071412925,7.966938546614657,8.277120507014176]]},"columnwidth":[2,1,1,1,1,1,1,1,1],"domain":{"x":[0.0,0.36000000000000004],"y":[0.0,1.0]},"header":{"align":"center","fill":{"color":"cornflowerblue"},"font":{"color":"black","size":12},"values":["name","mass_wet","mass_dry","H2O","Fe","P","SiO2","Al2O3","LOI"]},"type":"table"},{"domain":{"x":[0.4600000000000001,1.0],"y":[0.0,1.0]},"link":{"color":["rgba(165, 104, 66, 255)","rgba(171, 108, 69, 255)","rgba(142, 89, 57, 255)","rgba(144, 91, 58, 255)","rgba(179, 113, 72, 255)"],"customdata":["\u003cbr \u002f\u003emass_wet: 78\u003cbr \u002f\u003emass_dry: 78\u003cbr \u002f\u003eH2O: 0.0\u003cbr \u002f\u003eFe: 60.53\u003cbr \u002f\u003eP: 0.05\u003cbr \u002f\u003eSiO2: 2.87\u003cbr \u002f\u003eAl2O3: 1.62\u003cbr \u002f\u003eLOI: 8.15\u003cbr \u002f\u003e","\u003cbr \u002f\u003emass_wet: 62\u003cbr \u002f\u003emass_dry: 62\u003cbr \u002f\u003eH2O: 0.0\u003cbr \u002f\u003eFe: 60.19\u003cbr \u002f\u003eP: 0.06\u003cbr \u002f\u003eSiO2: 3.05\u003cbr \u002f\u003eAl2O3: 1.79\u003cbr \u002f\u003eLOI: 8.21\u003cbr \u002f\u003e","\u003cbr \u002f\u003emass_wet: 16\u003cbr \u002f\u003emass_dry: 16\u003cbr \u002f\u003eH2O: 0.0\u003cbr \u002f\u003eFe: 61.89\u003cbr \u002f\u003eP: 0.04\u003cbr \u002f\u003eSiO2: 2.14\u003cbr \u002f\u003eAl2O3: 0.96\u003cbr \u002f\u003eLOI: 7.90\u003cbr \u002f\u003e","\u003cbr \u002f\u003emass_wet: 12\u003cbr \u002f\u003emass_dry: 12\u003cbr \u002f\u003eH2O: 0.0\u003cbr \u002f\u003eFe: 61.77\u003cbr \u002f\u003eP: 0.04\u003cbr \u002f\u003eSiO2: 2.22\u003cbr \u002f\u003eAl2O3: 0.98\u003cbr \u002f\u003eLOI: 7.97\u003cbr \u002f\u003e","\u003cbr \u002f\u003emass_wet: 50\u003cbr \u002f\u003emass_dry: 50\u003cbr \u002f\u003eH2O: 0.0\u003cbr \u002f\u003eFe: 59.79\u003cbr \u002f\u003eP: 0.06\u003cbr \u002f\u003eSiO2: 3.26\u003cbr \u002f\u003eAl2O3: 2.00\u003cbr \u002f\u003eLOI: 8.28\u003cbr \u002f\u003e"],"hovertemplate":"\u003cb\u003e\u003ci\u003e%{label}\u003c\u002fi\u003e\u003c\u002fb\u003e\u003cbr \u002f\u003eSource: %{source.customdata}\u003cbr \u002f\u003eTarget: %{target.customdata}\u003cbr \u002f\u003e%{customdata}","label":["head","fines","lump","lump_2","fines_2"],"source":[0,1,1,2,2],"target":[1,2,5,3,4],"value":[77.93999999999998,62.2200643,15.719935700000002,12.478655849667005,49.74140845033299]},"node":{"color":["blue","green","green","blue","blue","blue"],"customdata":["head","screen","screen_2","lump","fines","stockpile"],"label":["head","screen","screen_2","lump","fines","stockpile"],"line":{"color":"black","width":0.5},"pad":15,"thickness":20},"type":"sankey"}],                        {"font":{"size":12},"template":{"data":{"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"A072391\u003cbr\u003e\u003csup\u003eBalanced: True, Edge Status OK: True\u003c\u002fsup\u003e"}},                        {"responsive": true}                    )                };                            </script>        </div>
</body>
</html><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  2.498 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-504-dag-with-estimator-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/bd7c0a79bd9316a9bc18038ebb59ce9d/504_dag_with_estimator.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">504_dag_with_estimator.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/810ed2b5b24796535fe06f8bf18b60bb/504_dag_with_estimator.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">504_dag_with_estimator.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="503_dag_with_partitions.html" class="btn btn-neutral float-left" title="DAG with Partitions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="_501_simulating_networks.html" class="btn btn-neutral float-right" title="Simulating a Network in Parallel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Greg Elphick.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>